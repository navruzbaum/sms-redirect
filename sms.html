<!doctype html>

<html>
    <head>
        <title>HTTPS to SMS</title>
    </head>
    <body>
        <script>
            function openSMS(tel, body) {
                const smsLink = `sms:${tel}?body=${encodeURIComponent(body)}`;
                const isSMSAvailable = (() => {
                    const a = document.createElement('a');
                    a.href = smsLink;
                    return a.protocol === 'sms:';
                })();
            
                if (isSMSAvailable) {
                    window.location = smsLink;
                } else {
                    alert("Your device does not support SMS functionality. Please use a mobile device.");
                }
            }
            // Parse query string parameters using URLSearchParams
            const urlSearchParams = new URLSearchParams(window.location.search);
            const params = Object.fromEntries(urlSearchParams.entries());
            
            // Retrieve tel and body parameters
            const tel = params.tel;
            const body = encodeURIComponent(params.body || ''); // Encode body for special characters
            
            // Redirect to SMS app if tel is valid
            if (tel) {
                openSMS(tel, body);
            }
        </script>
    </body>
</html>
